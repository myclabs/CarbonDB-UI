<div class="container">
  <h1>
    <span ng-repeat="keyword in keywords">{{keyword.label}} <span ng-show="!$last">-</span> </span><small>[{{unit.symbol}}]</small>
  </h1>
  <p>

    <h2>Impacts</h2>
    <div ng-repeat="impactType in impactTypes.children">
      <h3>{{impactType.label}}</h3>
      <div ng-if="impactsAndFlows[impactType.id].length == 0">This process has no impact for this impact category.</div>
      <table class="table tmd table-nonfluid" ng-if="impactsAndFlows[impactType.id].length > 0">
        <tr>
          <th>Type</th>
          <th>Value</th>
          <th>Unit</th>
        </tr>
        <tr ng-repeat="impact in impactsAndFlows[impactType.id]">
          <td>{{impact.label}}</td>
          <td>{{impact.value}}</td>
          <td>{{impact.unit.symbol}} / {{unit.symbol}}</td>
        </tr>
      </table>
    </div>

    <h2>Elementary flows</h2>
    <div ng-repeat="flowType in flowTypes.children">
      <h3>{{flowType.label}}</h3>
      <div ng-if="impactsAndFlows[flowType.id].length == 0">This process has no elementary flow for this elementary flow category.</div>
      <table class="table tmd table-nonfluid" ng-if="impactsAndFlows[flowType.id].length > 0">
        <tr>
          <th>Type</th>
          <th>Value</th>
          <th>Unit</th>
        </tr>
        <tr ng-repeat="flow in impactsAndFlows[flowType.id]">
          <td>{{flow.label}}</td>
          <td>{{flow.value}}</td>
          <td>{{flow.unit.symbol}} / {{unit.symbol}}</td>
        </tr>
      </table>
    </div>

    <h2>Groups containing this process</h2>
    <ul>
      <li ng-repeat="group in groups"><a ng-href="#/group/{{group.id}}">{{group.label}}</a></li>
    </ul>

    <h2>Relations</h2>
    <div ng-if="relations.length == 0">This process has no relation.</div>
  	<table class="table tmd table-nonfluid" ng-if="relations.length > 0">
  		<tr>
  			<th>Upsteam</th>
  			<th>Coefficient</th>
  			<th>Downstream</th>
        <th></th>
  		</tr>
  		<tr ng-repeat-start="relation in relations">
  			<td ng-if="relation.sourceId != id">
          <a ng-href="#/process/{{relation.sourceId}}">
            {{relation.sourceLabel}}
            <small>[{{relation.sourceUnit.symbol}}]</small>
          </a>
        </td>
        <td ng-if="relation.sourceId == id">
          {{relation.sourceLabel}}
          <small>[{{relation.sourceUnit.symbol}}]</small>
        </td>
        <td ng-if="relation.coeffId != id">
          <a ng-href="#/coefficient/{{relation.coeffId}}">
            {{relation.coeffLabel}}
            <small>[{{relation.coeffUnit.symbol}}]</small>
            <sup ng-if="relation.exponent == -1">-1</sup>
          </a>
        </td>
        <td ng-if="relation.destinationId != id">
          <a ng-href="#/process/{{relation.destinationId}}">
            {{relation.destinationLabel}}
            <small>[{{relation.destinationUnit.symbol}}]</small>
          </a>
        </td>
        <td ng-if="relation.destinationId == id">
          {{relation.destinationLabel}}
          <small>[{{relation.destinationUnit.symbol}}]</small>
        </td>
        <td><a data-toggle="collapse" data-target="#infos-{{$index}}" style="cursor: pointer;">Infos</a></td>
  	 	</tr>
      <tr ng-repeat-end>
        <td colspan="4" class="td-collapse">
          <div class="collapse out" id="infos-{{$index}}">
            <p>Relation type: {{relation.sourceRelation.type.label}}</p>
            <strong>Derived from:</strong>
            <table class="table tmd table-nonfluid">
              <tr>
                <th>Upsteam</th>
                <th>Coefficient</th>
                <th>Downstream</th>
              </tr>
              <tr>
                <td><a ng-href="#/group/{{relation.sourceRelation.source.id}}">{{relation.sourceRelation.source.label}}</a></td>
                <td><a ng-href="#/group/{{relation.sourceRelation.coeff.id}}">{{relation.sourceRelation.coeff.label}} <sup ng-if="relation.sourceRelation.exponent == -1">-1</sup></a></td>
                <td><a ng-href="#/group/{{relation.sourceRelation.destination.id}}">{{relation.sourceRelation.destination.label}}</a></td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
  	</table>
  <hr />
</div>